{% load static %}

<nav class="w-full border-b border-black pb-3 mb-6">

    <div class="max-w-6xl mx-auto px-4">

        <div class="grid grid-cols-2 md:grid-cols-3 items-center py-4">

            <!-- LOGO -->
            <div class="flex items-center space-x-3">
                <a href="{% url 'core:index' %}">
                    <div class="logo-box flex font-bold text-2xl uppercase border-2 border-black">
                        <span class="logo-part-1 bg-black text-white px-2">Resistencia</span>
                        <span class="logo-part-2 bg-white text-black px-2">Viva</span>
                    </div>
                </a>
            </div>

            <!-- MENÃš DESKTOP (solo ArtÃ­culos queda) -->
            <div class="hidden md:flex justify-center space-x-6">
                <a href="{% url 'resistenciaViva:articulos-list' %}" class="nav-link-custom">
                    ArtÃ­culos
                </a>
            </div>

            <!-- DERECHA (buscador + tema + login) -->
            <div class="hidden md:flex items-center justify-end space-x-4">

                <!-- BUSCADOR estilo Carla -->
                <form action="{% url 'home' %}" method="GET" class="relative w-64">
                    <input
                        type="text"
                        name="q"
                        value="{{ request.GET.q|default:'' }}"
                        class="w-full border border-black bg-transparent px-3 py-1 rounded-none"
                    >
                    <button type="submit"
                        class="absolute right-3 top-1/2 -translate-y-1/2 text-black">
                        <i class="bi bi-search"></i>
                    </button>
                </form>

                <!-- DARK MODE -->
                <button id="themeToggle"
                    class="px-2 py-1 border rounded dark:border-gray-500">
                    ðŸŒ“
                </button>

                <!-- LOGIN / LOGOUT -->
                {% if user.is_authenticated %}
                    <form action="{% url 'user:logout' %}" method="post">
                        {% csrf_token %}
                        <button class="px-4 py-2 bg-black text-white hover:bg-gray-800">
                            Logout
                        </button>
                    </form>
                {% else %}
                    <a href="{% url 'user:login' %}"
                       class="px-4 py-2 bg-black text-white hover:bg-gray-800">
                       Login
                    </a>
                {% endif %}
            </div>

            <!-- BOTÃ“N MOBILE -->
            <button id="navToggle"
                class="md:hidden justify-self-end px-2 py-1 border rounded">
                â˜°
            </button>

        </div>

        <!-- MENÃš MOBILE -->
        <div id="mobileMenu" class="hidden flex-col mt-3 space-y-2 md:hidden">

            <!-- Buscador Mobile -->
            <form action="{% url 'home' %}" method="GET" class="relative w-full">
                <input
                    type="text"
                    name="q"
                    placeholder="Buscar..."
                    class="w-full border border-black px-3 py-1 bg-transparent"
                >
            </form>

            <a href="{% url 'resistenciaViva:articulos-list' %}" class="block py-2 border-b">
                ArtÃ­culos
            </a>

            {% if user.is_authenticated %}
                <form action="{% url 'user:logout' %}" method="post" class="w-full">
                    {% csrf_token %}
                    <button class="w-full py-2 bg-black text-white">
                        Logout
                    </button>
                </form>
            {% else %}
                <a href="{% url 'user:login' %}"
                   class="block py-2 bg-black text-white text-center hover:bg-gray-800">
                   Login
                </a>
            {% endif %}

        </div>

    </div>

</nav>
